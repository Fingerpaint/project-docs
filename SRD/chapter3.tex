\chapter{Specific requirements}
\label{chap:specreq}
This chapter lists all specific software requirements of the application to be developed, both functional and non-functional requirements. The requirements are categorised according to the interface they belong to, as described in section \ref{sec:moddesc}. \\
Each requirement has a specific priority, based on the MoSCoW model \cite{moscow}:

\begin{itemize}
    \item \emph{must have}; requirements with this priority are essential for the product, and must be implemented.
    \item \emph{should have}; requirements with this priority are not essential for the product to work. However, they are nearly as important as the \emph{must have}'s and are therefore expected to be implemented.
    \item \emph{could have}; requirements with this priority are a nice addition to the product, and may be implemented, if time and budget allow this.
    \item \emph{won't have}; requirements with this priority will not be implemented in this version of the product, but may be nice to implement in future versions.
\end{itemize}

Only those user requirements from the URD \cite{urd} with a priority higher then \emph{won't have} will be translated to software requirements in this chapter.

\todo{Moeten we dit inderdaad zo doen met die GWT verwijzing, of noemen we het juist niet zo specifiek?} \\
Note that as \applicationname\ is developed using GWT, some of the software requirements listed in this chapter are described in terms of specific GWT widgets or panels\footnote{The website for the GWT widgetlist can be found at \url{https://developers.google.com/web-toolkit/doc/latest/RefWidgetGallery}.}.

\todo{Requirements groeperen naar: MixerProvider, MiserPersistance, Client, ClientPersistence, SimulatorServer}

\section{Functional requirements}
This section lists the functional requirements for the \projectname app.

\subsection{MixerProvider}

\subsection{MixerPeristenceCommunication}

\subsection{MixerPersistence}

\subsection{MixerProviderCommunication}

\subsection{Client}

\subsection{ClientPersistence}

\subsection{SimulatorServerCommunication}

\subsection{SimulatorServer}

The user can select a rectangular mixer geometry. To this end, a cell browser is available that lists all the available geometries in the first column. This first column will contain several geometries, including \texttt{rectangle}, \texttt{square}, \texttt{circle} or \texttt{Journal Bearing}. After clicking on a certain geometry, the available mixers for this geometry are displayed in the second column of the cell browser. The user can now select a mixer of choice and then, the third column in the cell browser lists all the available starting concentration distributions for the selected mixer. There are three types of starting concentration distributions that the user can choose from. The first type is a \texttt{blank} concentration distribution, which simply means that the user will be presented with a clean canvas when this option is selected. The second type is a \texttt{load} option, so the user can load previously saved concentration distributions that are stored on their device. The third type of concentration distribution is a \texttt{predefined} distribution, meaning that the user can choose from a few predefined distributions that are already present in the application. In case of the second and third option, there will be a third column in the cell browser that lists all the available concentration distributions that can be loaded. When the user clicks on an item in the third column, the required distribution is immediately loaded on an appropriate canvas. For the first option, a blank canvas is displayed on the screen when the user clicks on \texttt{blank}. \\
This user requirement can then be described with the following functional requirements:

\SRQ{must have}{The user can select \texttt{rectangle} as a geometry, via the first column in the cell browser.} % CPR1
\SRQ{must have}{After having selected a geometry, the user can select a mixer that fits the selected geometry. The mixer can be selected via a second column in the cell browser.} % CPR2
\SRQ{should have}{The user can select \texttt{square} as a geometry, via the first column in the cell browser.}  % CPR3
\SRQ{could have}{The user can select \texttt{circle} as a geometry, via the first column in the cell browser.}  % CPR4
\SRQ{could have}{The user can select \texttt{Journal Bearing} as a geometry, via the first column in the cell browser.}  % CPR5
\SRQ{must have}{The user can select a blank canvas, by choosing the \texttt{blank} option in the third column in the cell browser.} % CPR6
\SRQ[prevsaved]{should have}{The user can view a list of all previously saved concentration distributions, by choosing the \texttt{load} option in the third column in the cell browser.} % CPR13
\SRQ{should have}{After selecting the \texttt{load} option from \srqref{prevsaved}, the user can select a previously saved distribution by clicking on one distribution in the fourth column in the cell browser.} % CPR13

\SRQ[predef]{should have}{The user can view a list of all predefined concentration distributions, by choosing the \texttt{predefined} option in the third column in the cell browser.} % CPR14
\SRQ{should have}{After selecting the \texttt{predefined} option from \srqref{predef}, the user can select a predefined initial concentration distribution by clicking on one distribution in the fourth column in the cell browser.} % CPR14

\todo{MixerProvider/SimulatorService Communication+MixdrPersistence requirements: \\
Zorg dat alle functionaliteit van de SimulatieServer beschikbaar is (stel de volledige API/data bloot) \\
snel genoeg, etcetera}

The user can change the drawing tool that is used to paint on the canvas. The current shape and size of the drawing tool is displayed on the mixing interface, as a button with an image. When the user clicks on this button, a pop-up menu appears with two vertical panels. The left panel contains a list of all the different shapes for the drawing tool, such as circle and square. The right panel contains a slider to adjust the size of the drawing tool. The user can change the settings for the drawing tool and close the pop-up menu by clicking on the button again. \\
These requirements can be described with the following functional requirements:

\SRQ{must have}{The user can select a colour (black or white) to paint with for the initial concentration distribution, via a Toggle Button.} % CPR6
\SRQ{must have}{The user can define an initial concentration distribution with the selected colour on the canvas, by drawing with their finger.} % CPR6
\SRQ[circleshaped]{must have}{The user can select a circle-shaped drawing tool via a pop-up panel.} % CPR7
\SRQ{must have}{After selecting the circle-shaped drawing tool in \srqref{circleshaped}, the user can draw with this tool on the canvas.} % CPR7, los omdat de square een lagere prioriteit heeft in het URD
\SRQ{must have}{The user can reset the current concentration distribution to a completely white concentration distribution, by clicking on the \texttt{Reset} button.} % CPR8
\SRQ[squareshaped]{should have}{The user can select a square-shaped drawing tool via a pop-up panel.} % CPR9
\SRQ{should have}{After selecting the square-shaped drawing tool in \srqref{squareshaped}, the user can draw this tool on the canvas.} % CPR9
\SRQ{should have}{The user can adjust the size of the drawing tool, using a slider in the popup panel from \srqref{circleshaped} and \srqref{squareshaped}}. % CPR10

The user can save an initial concentration distribution locally on their device. When the user clicks the \texttt{Save Distribution} button, a pop-up menu appears. The user can now enter a name for the concentration distribution and click the \texttt{Save} button to save the distribution. When the save was successful, a \emph{Save was successful} message is displayed and the user can press \texttt{OK} to go back to the mixing interface. If there is not enough memory to save the image, a \emph{Insufficient memory message} is displayed; the user can then press the \texttt{OK} button to go back to the mixing interface. \\
If the entered name is already in use, a new pop-up menu is displayed, giving the user the choice to either \texttt{Overwrite} or \texttt{Cancel} the current save process. If the user presses the \texttt{Overwrite} button and the save was successful, a \emph{Save was successful} message is displayed and the user can press \texttt{OK} to go back to the mixing interface. The user can abort the saving process in either dialogues, by clicking the \texttt{Cancel} button. \\

\SRQ[savedistr]{should have}{The user can save an initial concentration distribution locally on their device, using a \texttt{Save Distribution} button.} % CPR11
\SRQ[savename]{should have}{After clicking the save button from \srqref{savedistr}, the user can specify a name for the concentration distribution.} % CPR11
\SRQ[savebutton]{should have}{After specifying a name in \srqref{savename}, the user can save the distribution with this name using the \texttt{Save} button.} % CPR11
\SRQ{should have}{When the save from \srqref{savebutton} was successful,  the user can click the \texttt{OK} button to go back to the mixing interface.} % CPR11
\SRQ{should have}{If the specified name from \srqref{savename} is already taken, the user can click the \texttt{Overwrite} button to overwrite the previous distribution with the same name.} % CPR11
\SRQ{should have}{The user can cancel the saving process, by clicking the \texttt{Cancel} button; the user will now return to the mixing interface.} % CPR11

\SRQ[loaddistbutton]{should have}{The mixing interface has a \texttt{Load} button that allows the user to load previously saved concentration distributions.} % CPR13
\SRQ{should have}{After clicking the \texttt{Load} button from \srqref{loaddistbutton}, the \texttt{Load} distribution" interface appears.} % CPR13
\SRQ[loaddist]{should have}{The \texttt{Load distribution} interface contains a cell browser with two rows.} % CPR13
\SRQ[loadload]{should have}{The first row of the cell browser from \srqref{loaddist} contains a \texttt{Load} option, to load previously saved distributions.} % CPR13
\SRQ{should have}{The second row of the cell browser from \srqref{loadload} displays all previously saved concentration distributions for the selected option of \srqref{loadload}.} % CPR13
\SRQ{should have}{The user can load a specific concentration distribution by tapping on it; the mixing interface is now shown, with the selected distribution displayed on the canvas.} % CPR13+14
\SRQ{should have}{The user can press the \texttt{OK} button in the message from \srqref{nosaveddistr} to return to the \texttt{Load distribution} interface.} % CPR13

\SRQ[loadpred]{could have}{The first row of the cell browser from \srqref{loaddist} contains a \texttt{Predefined} option, to load predefined concentration distributions.} % CPR14
\SRQ{could have}{The second row of the cell browser from \srqref{loaddist} displays all predefined concentration distributions for the selected option of \srqref{loadpred}.} % CPR14

\todo{Moet ik hier al iets zeggen over de verschillende schermen? Ik heb nu soms een \texttt{Mixing interface} en hieronder praat ik over een screen met daarin alle previously saved distributions.} \\
\todo{Dit is niet in overeenstemming met use case B.20, want ik heb geen \texttt{View Saved Files} button en ik sta hier toe dat meerdere dingen tegelijkertijd verwijderd worden.} \\
The user can remove a previously saved initial concentration distribution. To this end, a \texttt{Remove saved distributions} button is available. When the user clicks this button, a new screen opens with a cell list that shows all the available saved concentration distributions, along with a check box next to each item. The \texttt{Remove saved distributions} button will remain visible in this new screen. The user can then select one or more items to be removed using the check boxes. When the remove button is pressed, an \emph{Are you sure?} message is displayed. When the user presses \texttt{Yes}, all the selected distributions will be removed and the user returns to the history interface. If \texttt{No} is pressed, removal process is aborted and the history interface is shown again. \\ 
If no concentration distributions have been saved yet, a \emph{No saved distributions} message is displayed and the user can press \texttt{OK} to continue and display the history interface again. If the user has not given access rights to the application, a \emph{Insufficient access rights} error message is shown. The user can press \texttt{OK} to return to the history interface. \\
This user requirement can then be described with the following functional requirements:

\SRQ{should have}{There is a \texttt{Remove saved distributions} button to remove previously saved distributions.} % CPR12
\SRQ[listsaved]{should have}{After clicking the \texttt{Remove saved distributions} button, the history interface is shown, with a cell list that provides all the previously saved concentration distributions.} % CPR12
\SRQ[selectremove]{should have}{Each item from in the cell list of \srqref{listsaved} contains a check box that can be selected or deselected, to indicate which distributions should be removed.} % CPR12
\SRQ[suremessage]{should have}{After selecting at least one item from \srqref{selectremove}, the user can press the \texttt{Remove saved distributions} button and a \emph{Are you sure?} message is shown.} % CPR12
\SRQ[yesbutton]{should have}{The user can remove all selected items from \srqref{selectremove} by clicking the \texttt{Yes} button in the dialogue from \srqref{suremessage}.} % CPR12
\SRQ[nobutton]{should have}{The user can cancel the removal process by clicking the \texttt{No} button in the dialogue from \srqref{suremessage}. } % CPR12
\SRQ[nosaveddistr]{should have}{If no distributions have been saved yet, a \emph{No saved distributions} message is shown.} % CPR12+13
\SRQ{should have}{The user can press the \texttt{OK} button in the message from \srqref{nosaveddistr} to return to the history interface.} % CPR12
\SRQ[insuffrights]{should have}{If the user has not given access rights to the application, a \emph{Insufficient access rights} error message is shown.} % CPR12
\SRQ{should have}{The user can press the \texttt{OK} button in the message from \srqref{insuffrights} to return to the history interface.} % CPR12
\SRQ{should have}{After pressing the button from requirements \srqref{yesbutton} or \srqref{nobutton}, the user returns to the history interface.} % CPR12

Requirements regarding the presentation and exportation of results: \\
\SRQ{should have}{The user can use a 'load' button to open a popup. In this popup he can select the files he wants to load. The 'load' button changes to 'load selected' and now loads all the selected files. The loaded data is then depicted in one graph.}
%CPR36

\SRQ{should have}{The user can use a 'export graph' button`to export the current result graph as a picture. If this button is used, the graph is exported as an SVG using the browser's native exporting support.}
%CPR37

\SRQ{could have}{After the  user has defined a mixing run, he can press the button 'visualise mixing'. After this button is pressed, the application processes the mixing run, together with the mixer data and responds by showing an animation of this mixing simulation to the user.}
%CPR38

\SRQ{could have}{After the user has visualised his mixing run (as described above), he can press the 'export animation' button. When this button is pressed, the animation is exported as an AVG using the browser's native exporting support.}

\SRQ{must have}{After the user has defined a mixing run, he can press the button `start mixing'. When this button is pressed, the result of the user's mixing protocol is shown.}
%CPR32

\SRQ{should have}{After the user pressed the `start mixing' button and the result is shown, he can press the `export picture' button. When this button is pressed, the result picture is exported as an SVG using the browser's native exporting support.}
%CPR33

\SRQ{must have}{After the user has defined a mixing run, he can press the button `start mixing'. When this button is pressed, the result of the user's mixing protocol is shown. Now the user can press a `show statistics' button. When pressed, a graph containing the mixing performance is shown.}
%CPR34

\SRQ{should have}{After the user has pressed the `show statistics' button and the mixing performance is shown, he can press the `export picture' button. When this button is pressed, the result picture is exported as an SVG using the browser's native exporting support.}
%CPR35

\SRQ{should have}{The user can use a `load' button to open a popup. In this popup he can select the files he wants to load. The `load' button changes to `load selected' and now loads all the selected files. The loaded data is then depicted in one graph.}
%CPR36

\SRQ{should have}{The user can use a `export graph' button`to export the current result graph as a picture. If this button is used, the graph is exported as an SVG using the browser's native exporting support.}
%CPR37

\SRQ{could have}{After the  user has defined a mixing run, he can tick a box titled `visualise mixing'. When this box is checked and he presses `start mixing', the application processes the mixing run, together with the mixer data and responds by showing an animation of this mixing simulation to the user.}
%CPR38

\SRQ{could have}{After the user has visualised his mixing run (as described above), he can press the `export animation' button. When this button is pressed, the animation is exported as an AVG using the browser's native exporting support.}
%CPR39

\SRQ{could have}{In the menu bar a flag of the currently selected language is visible. When clicked, a popup appears containing several language options, each symbolised by the flag of their country. These flags can be clicked to change the language to that specific language. Standard language is English.}
%CPR40&41

\subsubsection{Define a mixing protocol}
A wall movement is defined by either $T$ or $B$, denoting a movement of the top or bottom wall, respectively. Looking directly at the screen, a $T$ movement indicates that the top wall should move to the right, and a $B$ movement indicates that the bottom wall should move to the left. Each of these wall movements can be combined with a `$-$' sign, to indicate that the direction of movement should be reversed. This means $-T$, for example, indicates that the top wall should move to the \emph{left}. A duration can be any value that can be created by combining the possible values for $D$ (the step size), namely 4, 2, 1, 0.5, 0.25 and 0.1.

\SRQ{must have}{ % CPR20
    The user can enter a step size in a text area. If the user enters a value that cannot be created by combining possible values for $D$, the user should enter a different value.
}

\SRQ{must have}{ % CPR18
    The \emph{Step} class contains a wall movement and a duration.
}

\SRQ{must have}{ % CPR21
    The user can indicate via a spinner how many times the protocol should be applied.
}

\SRQ{should have}{ % CPR22
    The user can click the \emph{Save} button to save the mixing protocol to their device. The desired name for the protocol can then be specified in a pop-up.
}

\SRQ{should have}{ % CPR23
    The user can press the \emph{Remove} button to remove the protocol from the device.
}

\SRQ{should have}{ % CPR24
    After the user has selected the geometry and the mixer as in SRQ\todo{insert correct SRQ here}, they can choose to load a previously saved mixing protocol by choosing the \emph{Load} option. This spawns a fourth menu column with the names of all applicable saved protocols. Clicking one such protocol loads it.
}

\SRQ{should have}{ % CPR25
    Similar to SRQ\todo{insert SRQ for CPR18 here}, the user can create a protocol for a square geometry as a sequence of wall movements and their durations.
}

\SRQ{could have}{ % CPR26
    Using SRQ\todo{insert select a mixer SRQ here}, the user selects a circular geometry and a mixer. The mixing protocol is now defined, as there are no explicit mixer movements for the circular geometry.
}

\SRQ{must have}{ % CPR select a mixer
    After the user has selected a geometry using SRQ\todo{insert Mix of various CPRs SRQ here}, a new menu pops up, containing the list of all suitable mixers for the selected geometry.
}

\SRQ{could have}{ % CPR27
    Using SRQ\todo{insert mixer geometry SRQ here}, the user selects the \emph{Journal bearing} geometry and a mixer. A step size $D$ is selected using SRQ\todo{insert step size SRQ here}. The user can then swipe across the screen to indicate movements. Swiping to the right near the top of the outer circle means the outer circle rotates clockwise for $D$ time units, and swiping to the right near the top of the inner circle means the inner circle rotates clockwise for $D$ time units.
}

\SRQ{could have}{ % CPR28
    After SRQ\todo{insert mixer geometry SRQ here}, the user selects the \emph{Predefined} option in the third level of the \emph{Mixer} menu. This spawns a fourth level of the menu containing all suitable predefined mixing protocols for the selected geometry. Clicking one such protocol selects it, which means it will be used once the mixing is executed.
}

\SRQ{must have}{ % CPR30
    After the mixing has been executed, the user can save the results on their device by pressing the \emph{Save} button. This opens a pop-up using which the user can enter a name for the results.
}

\SRQ{must have}{ % CPR31
    In the menu with previously saved mixing runs, the user can press the \emph{Remove} button to remove this saved run from storage.
}

\subsubsection{Define mixing protocol for a rectangular geometry}
This class allows the user to define a mixing protocol as a sequence of wall movements for a rectangular mixer geometry.

\SRQ{must have}{ % CPR17
    The \emph{Protocol} class contains a list of \emph{Step}s.
}

\subsubsection{Clear the current settings for mixing protocol}
\SRQ{must have}{ % CPR19
    The user can press the \emph{Reset} button to clear the current canvas, which is equivalent to completely colouring it white.
}

\subsection{Client-Server communication}
\SRQ{must have}{ % CPR29
    After \todo{loads of SRQs which still have to be linked and as this linking functionality has not been implemented yet I will wait with choosing all correct SRQs and instead leave this notice here}, the user can press the \emph{Mix} button to execute the actual mixing.
}

\SRQ{must have}{ % CPR29cont1
    The parameters are JSON'ed and sent to the server using a socket. The server un-JSON's the parameters and executes the mixing using the \textsc{Fortran} implementation.
}

\SRQ{must have}{ % CPR29cont2
    The server un-JSON's the parameters and executes the mixing using the \textsc{Fortran} implementation.
}

\SRQ{must have}{ % CPR29cont3
    The server JSON's the resulting concentration distribution and the performance result and sends this JSON object back to the client.
}

\SRQ{must have}{ % CPR29cont4
    The client un-JSON's the concentration distribution and the performance result. This concentration distribution is visualised on the client's screen, using the canvas that was originally used to draw the initial concentration distribution. The performance result is visualised on the screen at the same time using a number.
}

\section{Non-functional requirements}
\label{sec:nonfuncreq}
\todo{individual sections for non-functional requirements}

\subsection{Performance}
\SRQ{must have}{Waiting time between submitting input and receiving output is no longer than 5 seconds.}
%CNR10

\SRQ{should have}{Waiting time between submitting input and receiving output is no longer than 3 seconds.}
%CNR11

\SRQ{could have}{Waiting time between submitting input and receiving output is no longer than 1 seconds.}
%CNR12

\subsection{Interface}

\todo{Hier zegguh dat wij Fortran servertje gebruikuh.}

\subsection{Operational}
\subsection{Resource}
\subsection{Verification and testing}
\subsection{Portability}
\SRQ{must have}{The application runs on iOS Safari version 6.0 and higher.}
%CNR1

\SRQ{should have}{The application runs on Firefox version 20 and higher.}
%CNR2

\SRQ{should have}{The application runs on Google Chrome version 26 and
higher.}
%CNR3

\SRQ{could have}{The application runs on Internet Explorer version 10 and higher.}
%CNR4

\SRQ{could have}{The application runs on Safari version 6.0 and higher.}
%CNR5

\SRQ{must have}{The application runs on devices running on iOS version 6 and higher.}
%CNR7

\SRQ{should have}{The application runs on devices running on Android version 4.0 and higher.}
%CNR8

\SRQ{could have}{The application runs on devices running on Windows 8.}
%CNR9

\subsection{Maintainability}
\subsection{Reliability}
\subsection{Security}
\subsection{Safety}
\subsection{Documentation}
\subsection{Extensibility}

\SRQ{must have}{The application should be easily extendable with new mixers.}
%CNR13
